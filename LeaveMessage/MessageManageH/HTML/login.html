<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录</title>
    <link rel="stylesheet" href="css/login.css">

    <!--<script src="js/App_Download.js"></script>-->

    <script src="js/app.js"></script>

    <!--樱花特效-->
    <link rel="stylesheet" href="css/yinghua.css">

    <script src="js/yinghua.js"></script>


</head>
<body>
<!--------------------樱花特效------------------------------------>
<div class="cherry">
    <img id="yinghua" src="img/yinghua.png"/>
</div>
<script>
    $(function(){
        $('.cherry').Cherry_Blossoms({
            is_Cherry:true,//是否生成樱花
            image_min:10,//花瓣最小宽度和高度
            image_max:50,//花瓣最大宽度和高度
            time_min:10000,//花瓣最快下坠时间
            time_max:15000,//花瓣最慢下坠时间
            interval:500//花瓣生成时间间隔
        })
    })
</script>
<!---------------------------------------------------登陆注册切换---------------------------------------------->
<script type="text/javascript">
    function isSwitch(hidMenu)
    {
        var hMenu=document.getElementById(hidMenu);
        hMenu.style.display=(hMenu.style.display=='block')?'none':'block';
        var sMenu=document.getElementById("launch-form");
        sMenu.style.display=(sMenu.style.display=='none')?'block':'none';
    }
</script>

<div id="content">
    <!------------------------------------------------登录表---------------------------------------------------->
    <div id="launch-form">
    <form>
        <img src="img/加.png" class="register" onclick="isSwitch('register-form')"/>
        <!---------------------------->
        <div class="headshot"><img src="img/粉猫.png"/></div>
        <!----------账号输入框，类型为文本----------->
        <input type="text" placeholder="id" id="uid">
        <!----------密码输入框，类型为密码----------->
        <input type="password" placeholder="password" id="psw">
        <!---------登录、注册 提交按钮--------->
        <div class="btn">
            <button onclick="TouchToLogin()">Login</button>
        <button class="logout" onclick="window.open('index.html')">Quit</button>
        </div>
    </form>
    </div>

    <!-------------------------------------------------注册表--------------------------------------------------->
    <div id="register-form">
    <form>
        <!---------------------------->
        <div class="headshot"><img src="img/粉猫.png"/></div>
        <input type="text" id="user_id" placeholder="id">
        <!----------账号输入框，类型为文本----------->
        <input type="text" id="Name" placeholder="name" autocomplete="off">
        <!----------密码输入框，类型为密码----------->
        <input type="password" id="Pasw" placeholder="password">
        <!---------登录、注册 提交按钮--------->
        <div class="btn">
            <button class="login" onclick="isSwitch('launch-form')">Back</button>
            <button class="logout" onclick="register()" >Sign Up</button>
        </div>
    </form>
    </div>
</div>


<!--前方尚在施工中-->

<!----------------------------------将登陆界面的账号密码传给后台------------------------------------>
<script type="text/javascript">
function pageReady() {}
    //点击登录时进行账号识别
    function TouchToLogin() {
        var user_id = document.getElementById('uid').value;
        var password = document.getElementById('psw').value;
//账号：1725121000 密码：123456

        ("http://localhost:8080/messagemanage/load?user_id=" + user_id).
        query(
        function (data) {
           // alert("http://localhost:8080/messagemanage/load?user_id="+user_id);
            // alert(data[0].password);

            if (password != data[0].password) {
                alert("用户不存在或密码错误！");
            }
            else {
                if (data[0].type == 0) {   //写留言界面
                    window.location.assign("Write.html")
                }
                else {   //管理员留言板界面
                    window.location.assign("myBoard.html")
                }
            }
            }
        )
    }

</script>

<!----------------------------------将注册界面的账号密码传给后台------------------------------------>
<script type="text/javascript">
    function register(){
            var json =
                {
                    "user_id":$("#user_id").val(),
                    "name":$("#Name").val(),
                    "password": $("#Pasw").val(),
                };
            if($("#Pasw").val()==null)
            {
                $.alert("密码不能为空",2);
            }
            else
            {
                "http://#".submit(json, function (data, msg)
                    {
                        if(data[0].type==1)
                        {
                            $.msg("注册成功!" + "<br>" + "1秒后自动跳转");
                            setTimeout(function () {  //使用  setTimeout（）方法设定定时1000毫秒
                                window.location.assign("login.html");//页面刷新
                            }, 1000);
                            // $.alert("注册成功！");
                        }
                        else
                        {
                            $.msg("账号已存在!请重新注册" + "<br>" + "1秒后自动跳转");
                            setTimeout(function () {  //使用  setTimeout（）方法设定定时1000毫秒
                                window.location.reload();//页面刷新
                            }, 1000);
                            // $.alert("注册成功！");
                        }
                    }
                );
            }
    }
    </script>




</body>
</html>